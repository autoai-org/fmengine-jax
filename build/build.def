Bootstrap: docker
From: nvidia/cuda:12.1.1-devel-ubuntu22.04

%files
    fmtrainer /app/fmtrainer
    requirements.txt /app/requirements.txt
%post
    apt update && apt upgrade -y
    apt install -y python3 python3-pip
    pip install --upgrade pip
    pip install --upgrade "jax[cuda12_pip]" -f https://storage.googleapis.com/jax-releases/jax_cuda_releases.html
    pip install -r /app/requirements.txt

%environment
    export PYTHONPATH="/app/"

%labels
    Author xiaozhe.yaoi@gmail.com
    Version v0.0.1

%help
    This is a demo container used to for distributed training with fmtrainer.